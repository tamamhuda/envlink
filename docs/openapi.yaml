openapi: 3.0.0
paths:
  /api/v1/account/logout:
    post:
      operationId: AccountController_logout
      parameters: []
      responses:
        "204":
          description: Logout successful
      security: &a1
        - jwt-access: []
      summary: Logout user
      tags: &a2
        - Account
  /api/v1/account/verify/resend:
    post:
      operationId: AccountController_resendVerifyEmail
      parameters:
        - name: x-client-url
          in: header
          description: Client URL
          required: false
          schema:
            type: string
      responses:
        "200":
          description: Resend verify email successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ZodString"
              examples:
                OK:
                  summary: Ok
                  value: OK
        "409":
          description: Resend verify email unsuccessful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ZodString"
              examples:
                CONFLICT:
                  summary: Conflict
                  value: Account already verified
      security: *a1
      summary: Resend verification email
      tags: *a2
  /api/v1/account/change-password:
    post:
      operationId: AccountController_changePassword
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChangePasswordDto"
      responses:
        "200":
          description: Change password successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserInfoResponse"
      security: *a1
      summary: Change password
      tags: *a2
  /api/v1/session/{id}:
    get:
      operationId: SessionController_getSessionById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get session by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SessionInfoResponse"
      security:
        - jwt-access: []
      summary: Get session by id
      tags: &a3
        - Sessions
  /api/v1/session:
    get:
      operationId: SessionController_getAllUserSessions
      parameters:
        - name: isActive
          required: true
          in: query
          schema:
            type: boolean
      responses:
        "200":
          description: Get all user sessions successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SessionsInfoResponse"
      security:
        - jwt-access: []
      summary: Get all user sessions
      tags: *a3
  /api/v1/session/revoke/{id}:
    post:
      operationId: SessionController_revokeSessionById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: No content
      security:
        - jwt-access: []
      summary: Revoke a user session
      tags: *a3
  /api/v1/session/revoke:
    post:
      operationId: SessionController_revokeAllSessions
      parameters: []
      responses:
        "204":
          description: No content
      security:
        - jwt-access: []
      summary: Revoke all user sessions
      tags: *a3
  /api/v1/user/me:
    get:
      operationId: UserController_userInfo
      parameters: []
      responses:
        "200":
          description: Get user information successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserInfoResponse"
      security: &a4
        - jwt-access: []
      summary: Get user information
      tags: &a5
        - User Management
  /api/v1/user/update/{id}:
    put:
      operationId: UserController_updateUser
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserBodyDto"
      responses:
        "200":
          description: Update user information successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserInfoResponse"
      security: *a4
      summary: Update user information
      tags: *a5
  /api/v1/user/image/upload:
    post:
      operationId: UserController_imageUpload
      parameters: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "200":
          description: Upload user image successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserInfoResponse"
      security: *a4
      summary: Upload user image
      tags: *a5
  /api/v1/auth/register:
    post:
      operationId: AuthController_register
      parameters:
        - name: x-client-url
          in: header
          description: Client URL
          required: false
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterBodyDto"
      responses:
        "200":
          description: Registration successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthenticatedResponse"
      summary: Register a new account
      tags: &a6
        - Authentication
  /api/v1/auth/login:
    post:
      operationId: AuthController_login
      parameters: []
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthenticatedResponse"
      summary: Login an account
      tags: *a6
  /api/v1/auth/refresh:
    post:
      operationId: AuthController_refreshToken
      parameters: []
      responses:
        "200":
          description: Refresh token successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokensResponse"
      security:
        - jwt-refresh: []
      summary: Refresh token
      tags: *a6
  /api/v1/auth/verify:
    get:
      operationId: AuthController_verify
      parameters:
        - name: token
          required: true
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Verify email successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserInfoDto"
      summary: Verify email
      tags: *a6
  /api/v1/health:
    get:
      operationId: HealthController_check
      parameters: []
      responses:
        "200":
          description: The Health Check is successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  info:
                    type: object
                    example: &a7
                      database: &a8
                        status: up
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  error:
                    type: object
                    example: {}
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  details:
                    type: object
                    example: *a7
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
        "503":
          description: The Health Check is not successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  info:
                    type: object
                    example: *a7
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  error:
                    type: object
                    example:
                      redis: &a9
                        status: down
                        message: Could not connect
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  details:
                    type: object
                    example:
                      database: *a8
                      redis: *a9
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
      summary: Check health status
      tags:
        - Health
  /api/v1/urls:
    post:
      operationId: UrlsController_createUrls
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ShortenUrlDto"
      responses:
        "201":
          description: Created a new short URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UrlResponse"
      security: &a10
        - jwt-access: []
      summary: Create a new short URL
      tags: &a11
        - Transactions
    get:
      operationId: UrlsController_getUrls
      parameters: []
      responses:
        "200":
          description: Get all short URLs for a user successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AllUrlsResponse"
      security: *a10
      summary: Get all short URLs for a user
      tags: *a11
  /api/v1/urls/{id}:
    get:
      operationId: UrlsController_getUrlById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get a short URL by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UrlResponse"
      security: *a10
      summary: Get a short URL by id
      tags: *a11
    put:
      operationId: UrlsController_updateUrl
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUrlDto"
      responses:
        "200":
          description: Update a short URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UrlResponse"
      security: *a10
      summary: Update a short URL
      tags: *a11
    delete:
      operationId: UrlsController_deleteUrl
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "204":
          description: Delete a short URL successfully
      security: *a10
      summary: Delete a short URL
      tags: *a11
  /api/v1/public/urls/shorten:
    post:
      operationId: PublicUrlsController_shortenUrl
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ShortenUrlDto"
      responses:
        "201":
          description: Created a new public short URL successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublicUrlResponse"
      summary: Shorten a URL for public access
      tags: &a12
        - Public URLs
  /api/v1/public/urls/{code}:
    get:
      operationId: PublicUrlsController_getUrl
      parameters:
        - name: code
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get a short URL for a public access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublicUrlResponse"
        "403":
          description: Forbidden access to the URL
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ForbiddenResponse"
      summary: Get a short URL for public access
      tags: *a12
  /api/v1/public/urls/unlock/{code}:
    post:
      operationId: PublicUrlsController_unlockUrl
      parameters:
        - name: code
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UnlockUrlDto"
      responses:
        "200":
          description: Unlock a short URL for a public access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublicUrlResponse"
      summary: Unlock a short URL for public access
      tags: *a12
  /api/v1/subscriptions/active:
    get:
      operationId: SubscriptionsController_getUserActiveSubscription
      parameters: []
      responses:
        "200":
          description: Get user active subscription successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubscriptionInfoResponse"
      security: &a13
        - jwt-access: []
      summary: Get user active subscription
      tags: &a14
        - Subscriptions
  /api/v1/subscriptions/active/cycles:
    get:
      operationId: SubscriptionsController_getUserActiveSubscriptionCycles
      parameters: []
      responses:
        "200":
          description: Get all active subscription cycles successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListSubscriptionCyclesResponse"
      security: *a13
      summary: Get all active subscription cycles
      tags: *a14
  /api/v1/subscriptions/{id}:
    get:
      operationId: SubscriptionsController_getSubscriptionById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get subscription by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubscriptionInfoResponse"
      security: *a13
      summary: Get subscription by id
      tags: *a14
  /api/v1/subscriptions/{id}/cycles:
    get:
      operationId: SubscriptionsController_getAllUserSubscriptionCycles
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get all subscription cycles successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListSubscriptionCyclesResponse"
      security: *a13
      summary: Get all subscription cycles
      tags: *a14
  /api/v1/subscriptions/{id}/cycles/{cycleId}:
    get:
      operationId: SubscriptionsController_getUserSubscriptionCycleById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: cycleId
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get subscription cycle by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubscriptionCycleResponse"
      security: *a13
      summary: Get subscription cycle by id
      tags: *a14
  /api/v1/subscriptions/{id}/deactivate:
    post:
      operationId: SubscriptionsController_deactivateSubscription
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Deactivate Subscription plan successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubscriptionInfoResponse"
      security: *a13
      summary: Deactivate subscription plan
      tags: *a14
  /api/v1/subscriptions/{id}/plans/upgrade:
    post:
      operationId: SubscriptionsController_upgradeSubscriptionPlan
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpgradeSubscriptionDto"
      responses:
        "201":
          description: Upgrade subscription plan successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubscriptionInfoResponse"
      security: *a13
      summary: Upgrade subscription plan
      tags: *a14
  /api/v1/subscriptions/{id}/plans/upgrade/options:
    get:
      operationId: SubscriptionsController_getAllUpgradePlanOptions
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "201":
          description: Get subscription upgrade options successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpgradePlanOptionResponse"
      security: *a13
      tags: *a14
  /api/v1/payment-methods/requests:
    get:
      operationId: PaymentMethodsController_requestPaymentMethod
      parameters:
        - name: successReturnUrl
          required: true
          in: query
          schema:
            type: string
        - name: failureReturnUrl
          required: true
          in: query
          schema:
            type: string
      responses:
        "200":
          description: Get requested payment method successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListPaymentMethodActionResponse"
      security: &a15
        - jwt-access: []
      summary: Get requested payment methods
      tags: &a16
        - Payment Methods
  /api/v1/payment-methods/{id}:
    get:
      operationId: PaymentMethodsController_getPaymentMethodById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: Get payment method by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodResponse"
      security: *a15
      summary: Get payment method by id
      tags: *a16
  /api/v1/payment-methods:
    get:
      operationId: PaymentMethodsController_getAllPaymentMethods
      parameters: []
      responses:
        "200":
          description: Get all payment methods successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AllPaymentMethodsResponse"
      security: *a15
      summary: Get all payment methods
      tags: *a16
    post:
      operationId: PaymentMethodsController_createPaymentMethod
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePaymentMethodDto"
      responses:
        "200":
          description: Create payment method successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodActionResponse"
      security: *a15
      summary: Create payment method
      tags: *a16
  /api/v1/payment-methods/sort:
    patch:
      operationId: PaymentMethodsController_sortPaymentMethods
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SortPaymentMethodsDto"
      responses:
        "200":
          description: Get payment method by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodResponse"
      security: *a15
      summary: Sort payment methods
      tags: *a16
  /api/v1/public/payment-methods/add:
    get:
      operationId: PublicPaymentMethodsController_addPaymentMethod
      parameters:
        - name: token
          required: true
          in: query
          schema:
            type: string
        - name: successReturnUrl
          required: true
          in: query
          schema:
            type: string
        - name: failureReturnUrl
          required: true
          in: query
          schema:
            type: string
      responses:
        "200":
          description: ""
      summary: Add payment method
      tags: &a17
        - "Public Payment Methods "
  /api/v1/public/payment-methods/validate:
    post:
      operationId: PublicPaymentMethodsController_validatePaymentMethod
      parameters:
        - name: token
          required: true
          in: query
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ValidatePaymentMethodDto"
      responses:
        "200":
          description: Validate payment method successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OkResponse"
      summary: Validate payment method
      tags: *a17
  /api/v1/public/payment-methods:
    post:
      operationId: PublicPaymentMethodsController_createPaymentMethod
      parameters:
        - name: token
          required: true
          in: query
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePaymentMethodDto"
      responses:
        "200":
          description: Create payment method successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodActionResponse"
      summary: Create payment method
      tags: *a17
  /api/v1/webhooks/xendit/payment_methods:
    post:
      operationId: WebhooksController_handleXenditPaymentMethods
      parameters: []
      responses:
        "200":
          description: successfully handling payment methods callback data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OkResponse"
      summary: Handle Xendit payment methods callback data
      tags: &a18
        - Webhooks
  /api/v1/webhooks/xendit/recurring:
    post:
      operationId: WebhooksController_handleXenditRecurring
      parameters: []
      responses:
        "200":
          description: successfully handling recurring plan callback data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OkResponse"
      summary: Handle Xendit recurring plan callback data
      tags: *a18
  /api/v1/transactions:
    get:
      operationId: TransactionsController_getAllTransactions
      parameters:
        - name: startDate
          required: false
          in: query
          description: Start date filter (YYYY-MM-DD)
          schema:
            type: string
        - name: endDate
          required: false
          in: query
          description: End date filter (YYYY-MM-DD)
          schema:
            type: string
        - name: status
          required: false
          in: query
          description: Transaction status filter (can include multiple)
          schema:
            type: array
            items:
              type: string
      responses:
        "200":
          description: Get all transactions successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListTransactionsResponse"
      security: &a19
        - jwt-access: []
      summary: Get all transactions
      tags: &a20
        - Transactions
  /api/v1/transactions/{id}:
    get:
      operationId: TransactionsController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: get transaction by id successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ListTransactionsResponse"
      security: *a19
      summary: Get transaction by id
      tags: *a20
info:
  title: envlink
  description: A fast and reliable URL shortening service built with NestJS,
    enabling easy link generation, management, and usage tracking.
  version: v1.0
  contact: {}
tags: []
servers:
  - url: http://localhost:3000
    description: Local Development
  - url: https://local-nest.utadev.app
    description: Local Development (Cloudflare Tunnel)
  - url: https://staging.enlink.app
    description: Staging Environment
  - url: https://api.envlink.one
    description: Production API
components:
  securitySchemes:
    jwt-access:
      scheme: bearer
      bearerFormat: JWT
      type: http
      name: Authorization
      description: Enter Access Token (Bearer <token>)
      in: header
    jwt-refresh:
      scheme: bearer
      bearerFormat: JWT
      type: http
      name: Authorization
      description: Enter Refresh Token (Bearer <token>)
      in: header
  schemas:
    ZodString:
      type: object
      properties: {}
    ChangePasswordDto:
      type: object
      properties:
        old_password:
          type: string
          minLength: 1
          maxLength: 100
        new_password:
          type: string
          minLength: 1
          maxLength: 100
        confirm_password:
          type: string
          minLength: 1
          maxLength: 100
      required:
        - old_password
        - new_password
        - confirm_password
    UserInfoResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              format: uuid
              minLength: 1
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            email:
              type: string
              format: email
              minLength: 1
            username:
              type: string
              minLength: 1
            full_name:
              type: string
              minLength: 1
            phone_number:
              type: string
              nullable: true
            role:
              type: string
              enum:
                - admin
                - user
              x-enumNames:
                - ADMIN
                - USER
              default: user
            avatar:
              type: string
              format: uri
              nullable: true
            providers:
              type: object
              properties:
                provider:
                  type: string
                  enum:
                    - local
                    - google
                  x-enumNames:
                    - LOCAL
                    - GOOGLE
                  default: local
                is_verified:
                  type: boolean
                  default: false
            last_login_at:
              nullable: true
          required:
            - id
            - created_at
            - updated_at
            - email
            - username
            - full_name
            - providers
            - last_login_at
        timestamp:
          type: string
          default: 2025-11-04T06:21:27.972Z
      required:
        - success
        - path
        - data
    SessionInfoResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              format: uuid
              minLength: 1
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            user_agent:
              type: string
              maxLength: 255
              nullable: true
            ip_location:
              type: string
              maxLength: 255
              nullable: true
            is_revoked:
              type: boolean
              default: false
            revoked_at:
              nullable: true
            expires_at:
              nullable: true
            user:
              type: object
              properties:
                id:
                  type: string
                  format: uuid
                  minLength: 1
                created_at:
                  oneOf:
                    - type: string
                    - {}
                updated_at:
                  oneOf:
                    - type: string
                    - {}
                email:
                  type: string
                  format: email
                  minLength: 1
                username:
                  type: string
                  minLength: 1
                full_name:
                  type: string
                  minLength: 1
                phone_number:
                  type: string
                  nullable: true
                role:
                  type: string
                  enum:
                    - admin
                    - user
                  x-enumNames:
                    - ADMIN
                    - USER
                  default: user
                avatar:
                  type: string
                  format: uri
                  nullable: true
                providers:
                  type: object
                  properties:
                    provider:
                      type: string
                      enum:
                        - local
                        - google
                      x-enumNames:
                        - LOCAL
                        - GOOGLE
                      default: local
                    is_verified:
                      type: boolean
                      default: false
                last_login_at:
                  nullable: true
              required:
                - id
                - created_at
                - updated_at
                - email
                - username
                - full_name
                - providers
                - last_login_at
          required:
            - id
            - created_at
            - updated_at
            - user_agent
            - ip_location
            - revoked_at
            - expires_at
            - user
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.037Z
      required:
        - success
        - path
        - data
    SessionsInfoResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              created_at:
                oneOf:
                  - type: string
                  - {}
              updated_at:
                oneOf:
                  - type: string
                  - {}
              user_agent:
                type: string
                maxLength: 255
                nullable: true
              ip_location:
                type: string
                maxLength: 255
                nullable: true
              is_revoked:
                type: boolean
                default: false
              revoked_at:
                nullable: true
              expires_at:
                nullable: true
              user:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    minLength: 1
                  created_at:
                    oneOf:
                      - type: string
                      - {}
                  updated_at:
                    oneOf:
                      - type: string
                      - {}
                  email:
                    type: string
                    format: email
                    minLength: 1
                  username:
                    type: string
                    minLength: 1
                  full_name:
                    type: string
                    minLength: 1
                  phone_number:
                    type: string
                    nullable: true
                  role:
                    type: string
                    enum:
                      - admin
                      - user
                    x-enumNames:
                      - ADMIN
                      - USER
                    default: user
                  avatar:
                    type: string
                    format: uri
                    nullable: true
                  providers:
                    type: object
                    properties:
                      provider:
                        type: string
                        enum:
                          - local
                          - google
                        x-enumNames:
                          - LOCAL
                          - GOOGLE
                        default: local
                      is_verified:
                        type: boolean
                        default: false
                  last_login_at:
                    nullable: true
                required:
                  - id
                  - created_at
                  - updated_at
                  - email
                  - username
                  - full_name
                  - providers
                  - last_login_at
            required:
              - id
              - created_at
              - updated_at
              - user_agent
              - ip_location
              - revoked_at
              - expires_at
              - user
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.037Z
      required:
        - success
        - path
        - data
    UpdateUserBodyDto:
      type: object
      properties:
        username:
          type: string
          minLength: 1
        full_name:
          type: string
          minLength: 1
        email:
          type: string
          format: email
          minLength: 1
        phone_number:
          type: string
          nullable: true
        avatar:
          type: string
          format: uri
          nullable: true
    RegisterBodyDto:
      type: object
      properties:
        full_name:
          type: string
          minLength: 1
        username:
          type: string
          minLength: 1
        email:
          type: string
          format: email
          minLength: 1
        password:
          type: string
          minLength: 1
          maxLength: 100
        confirm_password:
          type: string
          minLength: 1
          maxLength: 100
        phone_number:
          type: string
          nullable: true
      required:
        - full_name
        - username
        - email
        - password
        - confirm_password
    AuthenticatedResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            tokens:
              type: object
              properties:
                access_token:
                  type: string
                refresh_token:
                  type: string
              required:
                - access_token
                - refresh_token
            user:
              type: object
              properties:
                id:
                  type: string
                  format: uuid
                  minLength: 1
                created_at:
                  oneOf:
                    - type: string
                    - {}
                updated_at:
                  oneOf:
                    - type: string
                    - {}
                email:
                  type: string
                  format: email
                  minLength: 1
                username:
                  type: string
                  minLength: 1
                full_name:
                  type: string
                  minLength: 1
                phone_number:
                  type: string
                  nullable: true
                role:
                  type: string
                  enum:
                    - admin
                    - user
                  x-enumNames:
                    - ADMIN
                    - USER
                  default: user
                avatar:
                  type: string
                  format: uri
                  nullable: true
                providers:
                  type: object
                  properties:
                    provider:
                      type: string
                      enum:
                        - local
                        - google
                      x-enumNames:
                        - LOCAL
                        - GOOGLE
                      default: local
                    is_verified:
                      type: boolean
                      default: false
                last_login_at:
                  nullable: true
              required:
                - id
                - created_at
                - updated_at
                - email
                - username
                - full_name
                - providers
                - last_login_at
          required:
            - tokens
            - user
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.176Z
      required:
        - success
        - path
        - data
    TokensResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            access_token:
              type: string
            refresh_token:
              type: string
          required:
            - access_token
            - refresh_token
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.176Z
      required:
        - success
        - path
        - data
    UserInfoDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
          minLength: 1
        created_at:
          oneOf:
            - type: string
            - {}
          x-nestjs_zod-empty-type: true
        updated_at:
          oneOf:
            - type: string
            - {}
          x-nestjs_zod-empty-type: true
        email:
          type: string
          format: email
          minLength: 1
        username:
          type: string
          minLength: 1
        full_name:
          type: string
          minLength: 1
        phone_number:
          type: string
          nullable: true
        role:
          type: string
          enum:
            - admin
            - user
          x-enumNames:
            - ADMIN
            - USER
          default: user
        avatar:
          type: string
          format: uri
          nullable: true
        providers:
          type: object
          properties:
            provider:
              type: string
              enum:
                - local
                - google
              x-enumNames:
                - LOCAL
                - GOOGLE
              default: local
            is_verified:
              type: boolean
              default: false
        last_login_at:
          nullable: true
          type: ""
          x-nestjs_zod-empty-type: true
      required:
        - id
        - created_at
        - updated_at
        - email
        - username
        - full_name
        - providers
        - last_login_at
    ShortenUrlDto:
      type: object
      properties:
        code:
          type: string
          maxLength: 64
        original_url:
          type: string
          format: uri
          minLength: 1
        is_protected:
          type: boolean
          default: false
        access_code:
          type: string
        expires_at:
          type: ""
          x-nestjs_zod-empty-type: true
        channel_ids:
          type: array
          items:
            type: string
            format: uuid
            minLength: 1
      required:
        - original_url
    UrlResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              format: uuid
              minLength: 1
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            code:
              type: string
              maxLength: 64
            original_url:
              type: string
              format: uri
              minLength: 1
            is_anonymous:
              type: boolean
              default: true
            is_protected:
              type: boolean
              default: false
            access_code:
              type: string
              nullable: true
            expires_at:
              nullable: true
            click_count:
              type: number
              minimum: 0
              exclusiveMinimum: false
              default: 0
            metadata:
              type: object
              properties:
                title:
                  type: string
                  maxLength: 255
                description:
                  type: string
                image:
                  type: string
                  format: uri
                favicon:
                  type: string
                  format: uri
                site_name:
                  type: string
                  maxLength: 255
              nullable: true
            channels:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    minLength: 1
                  name:
                    type: string
                    minLength: 1
                  description:
                    type: string
                    nullable: true
                required:
                  - id
                  - name
                  - description
          required:
            - id
            - created_at
            - updated_at
            - code
            - original_url
            - access_code
            - expires_at
            - metadata
            - channels
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.252Z
      required:
        - success
        - path
        - data
    AllUrlsResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              created_at:
                oneOf:
                  - type: string
                  - {}
              updated_at:
                oneOf:
                  - type: string
                  - {}
              code:
                type: string
                maxLength: 64
              original_url:
                type: string
                format: uri
                minLength: 1
              is_anonymous:
                type: boolean
                default: true
              is_protected:
                type: boolean
                default: false
              access_code:
                type: string
                nullable: true
              expires_at:
                nullable: true
              click_count:
                type: number
                minimum: 0
                exclusiveMinimum: false
                default: 0
              metadata:
                type: object
                properties:
                  title:
                    type: string
                    maxLength: 255
                  description:
                    type: string
                  image:
                    type: string
                    format: uri
                  favicon:
                    type: string
                    format: uri
                  site_name:
                    type: string
                    maxLength: 255
                nullable: true
              channels:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                      minLength: 1
                    name:
                      type: string
                      minLength: 1
                    description:
                      type: string
                      nullable: true
                  required:
                    - id
                    - name
                    - description
            required:
              - id
              - created_at
              - updated_at
              - code
              - original_url
              - access_code
              - expires_at
              - metadata
              - channels
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.253Z
      required:
        - success
        - path
        - data
    UpdateUrlDto:
      type: object
      properties:
        code:
          type: string
          maxLength: 64
        original_url:
          type: string
          format: uri
          minLength: 1
        is_anonymous:
          type: boolean
          default: true
        is_protected:
          type: boolean
          default: false
        access_code:
          type: string
          nullable: true
        expires_at:
          nullable: true
          type: ""
          x-nestjs_zod-empty-type: true
        metadata:
          type: object
          properties:
            title:
              type: string
              maxLength: 255
            description:
              type: string
            image:
              type: string
              format: uri
            favicon:
              type: string
              format: uri
            site_name:
              type: string
              maxLength: 255
          nullable: true
        channels:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              name:
                type: string
                minLength: 1
              description:
                type: string
                nullable: true
            required:
              - id
              - name
              - description
    PublicUrlResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            code:
              type: string
              maxLength: 64
            original_url:
              type: string
              format: uri
              minLength: 1
            is_anonymous:
              type: boolean
              default: true
            is_protected:
              type: boolean
              default: false
            expires_at:
              nullable: true
            click_count:
              type: number
              minimum: 0
              exclusiveMinimum: false
              default: 0
            metadata:
              type: object
              properties:
                title:
                  type: string
                  maxLength: 255
                description:
                  type: string
                image:
                  type: string
                  format: uri
                favicon:
                  type: string
                  format: uri
                site_name:
                  type: string
                  maxLength: 255
              nullable: true
          required:
            - created_at
            - updated_at
            - code
            - original_url
            - expires_at
            - metadata
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.252Z
      required:
        - success
        - path
        - data
    ForbiddenResponse:
      type: object
      properties:
        success:
          type: boolean
          default: false
        status:
          type: number
          default: 403
        message:
          type: string
        error:
          oneOf:
            - {}
            - type: string
          default: Forbidden Exception
          x-nestjs_zod-empty-type: true
        path:
          type: string
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.256Z
      required:
        - path
    UnlockUrlDto:
      type: object
      properties:
        access_code:
          type: string
          minLength: 1
      required:
        - access_code
    SubscriptionInfoResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              format: uuid
              minLength: 1
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            reference_id:
              type: string
              nullable: true
            external_id:
              type: string
              nullable: true
            user_id:
              type: string
              format: uuid
            plan:
              type: object
              properties:
                name:
                  type: string
                  enum:
                    - Free
                    - Pro
                    - Enterprise
                  x-enumNames:
                    - FREE
                    - PRO
                    - ENTERPRISE
                limit:
                  type: number
                  minimum: 1
                  exclusiveMinimum: false
                reset_interval:
                  type: string
                cost:
                  type: number
                  minimum: 1
                  exclusiveMinimum: false
                charge_on_success:
                  type: boolean
                  default: false
                description:
                  type: string
                  nullable: true
                price:
                  type: number
                  minimum: 0
                  exclusiveMinimum: false
              required:
                - name
                - limit
                - reset_interval
                - cost
                - description
                - price
            started_at:
              nullable: true
            expires_at:
              nullable: true
            remaining:
              type: number
              minimum: 0
              exclusiveMinimum: false
            status:
              type: string
              enum:
                - ACTIVE
                - INACTIVE
                - CANCELED
                - PENDING
                - EXPIRED
                - SUSPENDED
              x-enumNames:
                - ACTIVE
                - INACTIVE
                - CANCELED
                - PENDING
                - EXPIRED
                - SUSPENDED
            is_trial:
              type: boolean
              default: false
            schedule:
              type: object
              properties:
                interval:
                  type: string
                  enum:
                    - DAY
                    - WEEK
                    - MONTH
                    - YEAR
                  x-enumNames:
                    - DAY
                    - WEEK
                    - MONTH
                    - YEAR
                interval_count:
                  type: number
                  minimum: 1
                  exclusiveMinimum: false
                total_recurrence:
                  type: number
                  minimum: 1
                  exclusiveMinimum: false
              required:
                - interval
                - interval_count
                - total_recurrence
              nullable: true
            metadata:
              type: object
              properties:
                strategy:
                  type: string
                  enum:
                    - UPGRADE_IMMEDIATELY
                    - FINISH_CURRENT_CYCLE
                  x-enumNames:
                    - UPGRADE_IMMEDIATELY
                    - FINISH_CURRENT_CYCLE
                previous_plan:
                  type: string
                  enum:
                    - Free
                    - Pro
                    - Enterprise
                  x-enumNames:
                    - FREE
                    - PRO
                    - ENTERPRISE
                new_plan:
                  type: string
                  enum:
                    - Free
                    - Pro
                    - Enterprise
                  x-enumNames:
                    - FREE
                    - PRO
                    - ENTERPRISE
              required:
                - strategy
                - previous_plan
                - new_plan
              nullable: true
            transaction_status:
              type: string
              nullable: true
            next_billing_date:
              nullable: true
            actions:
              type: array
              items:
                type: object
                properties:
                  action:
                    type: string
                  url_type:
                    type: string
                  url:
                    type: string
                    format: uri
                  method:
                    type: string
                    default: GET
                required:
                  - action
                  - url_type
                  - url
          required:
            - id
            - created_at
            - updated_at
            - reference_id
            - external_id
            - user_id
            - plan
            - started_at
            - expires_at
            - remaining
            - status
            - schedule
            - metadata
            - transaction_status
            - next_billing_date
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.683Z
      required:
        - success
        - path
        - data
    ListSubscriptionCyclesResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              created_at:
                oneOf:
                  - type: string
                  - {}
              updated_at:
                oneOf:
                  - type: string
                  - {}
              subscription_id:
                type: string
                format: uuid
                minLength: 1
              action_ids:
                type: array
                items:
                  type: string
              transaction_id:
                type: string
                format: uuid
                nullable: true
              type:
                type: string
                minLength: 1
              status:
                type: string
                enum:
                  - SCHEDULED
                  - RETRYING
                  - FAILED
                  - SUCCEEDED
                  - CANCELLED
                x-enumNames:
                  - SCHEDULED
                  - RETRYING
                  - FAILED
                  - SUCCEEDED
                  - CANCELLED
              payment_link_failed_retry:
                type: string
                nullable: true
              cycle_number:
                type: number
                minimum: 1
                exclusiveMinimum: false
              attempt_count:
                type: number
                minimum: 0
                exclusiveMinimum: false
              failure_code:
                type: string
                nullable: true
              scheduled_date: {}
            required:
              - id
              - created_at
              - updated_at
              - subscription_id
              - action_ids
              - transaction_id
              - type
              - status
              - payment_link_failed_retry
              - cycle_number
              - attempt_count
              - failure_code
              - scheduled_date
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.683Z
      required:
        - success
        - path
        - data
    SubscriptionCycleResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              created_at:
                oneOf:
                  - type: string
                  - {}
              updated_at:
                oneOf:
                  - type: string
                  - {}
              subscription_id:
                type: string
                format: uuid
                minLength: 1
              action_ids:
                type: array
                items:
                  type: string
              transaction_id:
                type: string
                format: uuid
                nullable: true
              type:
                type: string
                minLength: 1
              status:
                type: string
                enum:
                  - SCHEDULED
                  - RETRYING
                  - FAILED
                  - SUCCEEDED
                  - CANCELLED
                x-enumNames:
                  - SCHEDULED
                  - RETRYING
                  - FAILED
                  - SUCCEEDED
                  - CANCELLED
              payment_link_failed_retry:
                type: string
                nullable: true
              cycle_number:
                type: number
                minimum: 1
                exclusiveMinimum: false
              attempt_count:
                type: number
                minimum: 0
                exclusiveMinimum: false
              failure_code:
                type: string
                nullable: true
              scheduled_date: {}
            required:
              - id
              - created_at
              - updated_at
              - subscription_id
              - action_ids
              - transaction_id
              - type
              - status
              - payment_link_failed_retry
              - cycle_number
              - attempt_count
              - failure_code
              - scheduled_date
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.683Z
      required:
        - success
        - path
        - data
    UpgradeSubscriptionDto:
      type: object
      properties:
        plan:
          type: string
          enum:
            - Free
            - Pro
            - Enterprise
          x-enumNames:
            - FREE
            - PRO
            - ENTERPRISE
        strategy:
          type: string
          enum:
            - UPGRADE_IMMEDIATELY
            - FINISH_CURRENT_CYCLE
          x-enumNames:
            - UPGRADE_IMMEDIATELY
            - FINISH_CURRENT_CYCLE
          default: UPGRADE_IMMEDIATELY
        amount:
          type: number
          minimum: 0
          exclusiveMinimum: false
        discount:
          type: number
          minimum: 0
          exclusiveMinimum: false
        schedule:
          type: object
          properties:
            interval:
              type: string
              enum:
                - DAY
                - WEEK
                - MONTH
                - YEAR
              x-enumNames:
                - DAY
                - WEEK
                - MONTH
                - YEAR
              default: MONTH
            interval_count:
              type: number
              minimum: 1
              exclusiveMinimum: false
              default: 1
            total_recurrence:
              type: number
              minimum: 1
              exclusiveMinimum: false
              default: 12
        description:
          type: string
          minLength: 1
      required:
        - plan
        - schedule
        - description
    UpgradePlanOptionResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              format: uuid
              minLength: 1
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            name:
              type: string
              enum:
                - Free
                - Pro
                - Enterprise
              x-enumNames:
                - FREE
                - PRO
                - ENTERPRISE
            limit:
              type: number
              minimum: 1
              exclusiveMinimum: false
            reset_interval:
              type: string
            cost:
              type: number
              minimum: 1
              exclusiveMinimum: false
            charge_on_success:
              type: boolean
              default: false
            description:
              type: string
              nullable: true
            price:
              type: number
              minimum: 0
              exclusiveMinimum: false
            upgradable:
              type: boolean
            options:
              type: array
              items:
                type: object
                properties:
                  strategy:
                    type: string
                    enum:
                      - UPGRADE_IMMEDIATELY
                      - FINISH_CURRENT_CYCLE
                    x-enumNames:
                      - UPGRADE_IMMEDIATELY
                      - FINISH_CURRENT_CYCLE
                  upgradable:
                    type: boolean
                  current_plan:
                    type: string
                    enum:
                      - Free
                      - Pro
                      - Enterprise
                    x-enumNames:
                      - FREE
                      - PRO
                      - ENTERPRISE
                  new_plan:
                    type: string
                    enum:
                      - Free
                      - Pro
                      - Enterprise
                    x-enumNames:
                      - FREE
                      - PRO
                      - ENTERPRISE
                  amount:
                    type: number
                    minimum: 0
                    exclusiveMinimum: false
                  discount:
                    type: number
                    minimum: 0
                    exclusiveMinimum: false
                  remaining_days:
                    type: number
                    minimum: 0
                    exclusiveMinimum: false
                  remaining_credit:
                    type: number
                    minimum: 0
                    exclusiveMinimum: false
                  net_amount:
                    type: number
                    minimum: 0
                    exclusiveMinimum: false
                required:
                  - strategy
                  - upgradable
                  - current_plan
                  - new_plan
                  - amount
                  - discount
                  - remaining_days
                  - remaining_credit
                  - net_amount
          required:
            - id
            - created_at
            - updated_at
            - name
            - limit
            - reset_interval
            - cost
            - description
            - price
            - upgradable
            - options
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.682Z
      required:
        - success
        - path
        - data
    ListPaymentMethodActionResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              action:
                type: string
              url:
                type: string
                format: uri
                minLength: 1
              method:
                type: string
                enum:
                  - GET
                  - POST
                  - PUT
                  - DELETE
                default: GET
            required:
              - action
              - url
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.679Z
      required:
        - success
        - path
        - data
    PaymentMethodResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              format: uuid
              minLength: 1
            created_at:
              oneOf:
                - type: string
                - {}
            updated_at:
              oneOf:
                - type: string
                - {}
            user_id:
              type: string
              format: uuid
              minLength: 1
            external_id:
              type: string
            type:
              type: string
              enum:
                - CARD
                - EWALLET
                - DIRECT_DEBIT
                - VIRTUAL_ACCOUNT
                - QRCODE
                - OTC
                - OTHER
              x-enumNames:
                - CARD
                - EWALLET
                - DIRECT_DEBIT
                - VA
                - QRCODE
                - OTC
                - OTHER
            reusability:
              type: string
              nullable: true
            country:
              type: string
              nullable: true
            currency:
              type: string
              nullable: true
            status:
              type: string
              nullable: true
            channel_code:
              type: string
              nullable: true
            provider:
              type: string
              nullable: true
            failure_code:
              type: string
              nullable: true
            custom_name:
              type: string
              nullable: true
            card:
              type: object
              properties:
                network:
                  type: string
                  nullable: true
                issuer:
                  type: string
                  nullable: true
                card_type:
                  type: string
                  nullable: true
                masked_card_number:
                  type: string
                  nullable: true
                expiry_month:
                  type: string
                  nullable: true
                expiry_year:
                  type: string
                  nullable: true
                card_holder_name:
                  type: string
                  nullable: true
              required:
                - network
                - issuer
                - card_type
                - masked_card_number
                - expiry_month
                - expiry_year
                - card_holder_name
              nullable: true
            direct_debit:
              type: object
              properties:
                bank_account_number:
                  type: string
                  nullable: true
                bank_account_hash:
                  type: string
                  nullable: true
              required:
                - bank_account_number
                - bank_account_hash
              nullable: true
            ewallet:
              type: object
              properties:
                account_name:
                  type: string
                  nullable: true
                account_number:
                  type: string
                  nullable: true
                payment_code:
                  type: string
                  nullable: true
                qr_string:
                  type: string
                  nullable: true
                expires_at:
                  type: string
                  nullable: true
              required:
                - account_name
                - account_number
                - payment_code
                - qr_string
                - expires_at
              nullable: true
            recurring_expiry:
              nullable: true
            recurring_frequency:
              type: number
              minimum: 1
              exclusiveMinimum: false
              nullable: true
            is_default:
              type: boolean
            rank:
              type: number
              minimum: 1
              exclusiveMinimum: false
            metadata:
              type: object
              additionalProperties: {}
              nullable: true
          required:
            - id
            - created_at
            - updated_at
            - user_id
            - external_id
            - type
            - reusability
            - country
            - currency
            - status
            - channel_code
            - provider
            - failure_code
            - custom_name
            - card
            - direct_debit
            - ewallet
            - recurring_expiry
            - recurring_frequency
            - is_default
            - rank
            - metadata
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.687Z
      required:
        - success
        - path
        - data
    AllPaymentMethodsResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              created_at:
                oneOf:
                  - type: string
                  - {}
              updated_at:
                oneOf:
                  - type: string
                  - {}
              user_id:
                type: string
                format: uuid
                minLength: 1
              external_id:
                type: string
              type:
                type: string
                enum:
                  - CARD
                  - EWALLET
                  - DIRECT_DEBIT
                  - VIRTUAL_ACCOUNT
                  - QRCODE
                  - OTC
                  - OTHER
                x-enumNames:
                  - CARD
                  - EWALLET
                  - DIRECT_DEBIT
                  - VA
                  - QRCODE
                  - OTC
                  - OTHER
              reusability:
                type: string
                nullable: true
              country:
                type: string
                nullable: true
              currency:
                type: string
                nullable: true
              status:
                type: string
                nullable: true
              channel_code:
                type: string
                nullable: true
              provider:
                type: string
                nullable: true
              failure_code:
                type: string
                nullable: true
              custom_name:
                type: string
                nullable: true
              card:
                type: object
                properties:
                  network:
                    type: string
                    nullable: true
                  issuer:
                    type: string
                    nullable: true
                  card_type:
                    type: string
                    nullable: true
                  masked_card_number:
                    type: string
                    nullable: true
                  expiry_month:
                    type: string
                    nullable: true
                  expiry_year:
                    type: string
                    nullable: true
                  card_holder_name:
                    type: string
                    nullable: true
                required:
                  - network
                  - issuer
                  - card_type
                  - masked_card_number
                  - expiry_month
                  - expiry_year
                  - card_holder_name
                nullable: true
              direct_debit:
                type: object
                properties:
                  bank_account_number:
                    type: string
                    nullable: true
                  bank_account_hash:
                    type: string
                    nullable: true
                required:
                  - bank_account_number
                  - bank_account_hash
                nullable: true
              ewallet:
                type: object
                properties:
                  account_name:
                    type: string
                    nullable: true
                  account_number:
                    type: string
                    nullable: true
                  payment_code:
                    type: string
                    nullable: true
                  qr_string:
                    type: string
                    nullable: true
                  expires_at:
                    type: string
                    nullable: true
                required:
                  - account_name
                  - account_number
                  - payment_code
                  - qr_string
                  - expires_at
                nullable: true
              recurring_expiry:
                nullable: true
              recurring_frequency:
                type: number
                minimum: 1
                exclusiveMinimum: false
                nullable: true
              is_default:
                type: boolean
              rank:
                type: number
                minimum: 1
                exclusiveMinimum: false
              metadata:
                type: object
                additionalProperties: {}
                nullable: true
            required:
              - id
              - created_at
              - updated_at
              - user_id
              - external_id
              - type
              - reusability
              - country
              - currency
              - status
              - channel_code
              - provider
              - failure_code
              - custom_name
              - card
              - direct_debit
              - ewallet
              - recurring_expiry
              - recurring_frequency
              - is_default
              - rank
              - metadata
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.687Z
      required:
        - success
        - path
        - data
    SortPaymentMethodsDto:
      type: object
      properties:
        root:
          type: array
          items:
            type: object
            properties:
              payment_method_id:
                type: string
                format: uuid
                minLength: 1
              rank:
                type: number
                minimum: 1
                exclusiveMinimum: false
            required:
              - payment_method_id
              - rank
          x-nestjs_zod-unwrap-root: true
    CreatePaymentMethodDto:
      type: object
      properties:
        type:
          type: string
          enum:
            - EWALLET
            - DIRECT_DEBIT
        ewallet:
          type: object
          properties:
            channel_code:
              type: string
              enum:
                - DANA
                - SHOPEEPAY
          required:
            - channel_code
          nullable: true
        direct_debit:
          type: object
          properties:
            channel_code:
              type: string
              enum:
                - MANDIRI
                - BPI
          required:
            - channel_code
          nullable: true
        default:
          type: boolean
          default: false
        success_return_url:
          type: string
          format: uri
        failure_return_url:
          type: string
          format: uri
      required:
        - type
        - success_return_url
        - failure_return_url
    PaymentMethodActionResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            action:
              type: string
            url:
              type: string
              format: uri
              minLength: 1
            method:
              type: string
              enum:
                - GET
                - POST
                - PUT
                - DELETE
              default: GET
          required:
            - action
            - url
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.679Z
      required:
        - success
        - path
        - data
    ValidatePaymentMethodDto:
      type: object
      properties:
        type:
          type: string
          enum:
            - CARD
            - EWALLET
            - DIRECT_DEBIT
        card:
          type: object
          properties:
            card_type:
              type: string
              nullable: true
            masked_card_number:
              type: string
              nullable: true
            expiry_month:
              type: string
              nullable: true
            expiry_year:
              type: string
              nullable: true
          required:
            - card_type
            - masked_card_number
            - expiry_month
            - expiry_year
          nullable: true
        ewallet:
          type: object
          properties:
            channel_code:
              type: string
              enum:
                - DANA
                - SHOPEEPAY
          required:
            - channel_code
          nullable: true
        direct_debit:
          type: object
          properties:
            channel_code:
              type: string
              enum:
                - MANDIRI
                - BPI
          required:
            - channel_code
          nullable: true
      required:
        - type
    OkResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: object
          properties:
            message:
              type: string
              default: OK
        timestamp:
          type: string
          default: 2025-11-04T06:21:27.971Z
      required:
        - success
        - path
        - data
    ListTransactionsResponse:
      type: object
      properties:
        success:
          type: boolean
        status:
          type: number
          default: 200
        path:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
                minLength: 1
              created_at:
                oneOf:
                  - type: string
                  - {}
              updated_at:
                oneOf:
                  - type: string
                  - {}
              user_id:
                type: string
                format: uuid
              cycle_id:
                type: string
                format: uuid
              payment_method_id:
                type: string
                format: uuid
              subscription_id:
                type: string
                format: uuid
              reference_id:
                type: string
                minLength: 1
              product_name:
                type: string
                minLength: 1
              amount:
                type: number
                minimum: 0
                exclusiveMinimum: false
              currency:
                type: string
                nullable: true
              status:
                type: string
                enum:
                  - PENDING
                  - PAID
                  - FAILED
                  - REFUSED
                  - REFUNDED
                x-enumNames:
                  - PENDING
                  - PAID
                  - FAILED
                  - REFUSED
                  - REFUNDED
              payment_method_type:
                type: string
                minLength: 1
              payment_type:
                type: string
                enum:
                  - PAYMENT_LINK
                  - PAYMENT_REQUEST
                x-enumNames:
                  - PAYMENT_LINK
                  - PAYMENT_REQUEST
              metadata:
                type: object
                properties: {}
                nullable: true
              paid_at:
                nullable: true
              failed_at:
                nullable: true
              failure_code:
                type: string
                nullable: true
              refunded_at:
                nullable: true
              invoice_id:
                type: string
                nullable: true
              invoice_url:
                type: string
                nullable: true
              invoice_number:
                type: string
                nullable: true
              invoice_pdf_path:
                type: string
                nullable: true
            required:
              - id
              - created_at
              - updated_at
              - user_id
              - cycle_id
              - payment_method_id
              - subscription_id
              - reference_id
              - product_name
              - amount
              - currency
              - status
              - payment_method_type
              - payment_type
              - metadata
              - paid_at
              - failed_at
              - failure_code
              - refunded_at
              - invoice_id
              - invoice_url
              - invoice_number
              - invoice_pdf_path
        timestamp:
          type: string
          default: 2025-11-04T06:21:28.696Z
      required:
        - success
        - path
        - data
